# Claude Web Go

A web-based chat application that interacts with Claude CLI using AWS Bedrock authentication.

## Features

- Clean chat interface with markdown support
- File rendering for PNG/SVG diagrams generated by Claude
- Local storage for conversation history with rolling context window
- AWS Bedrock authentication without ~/.aws/credentials
- WebSocket support for real-time communication
- Kubernetes-ready with EKS pod identity support

## Prerequisites

- Go 1.21+
- Claude CLI installed
- AWS credentials configured via environment variables
- Access to AWS Bedrock with Claude models enabled

## Local Development

1. Set AWS environment variables:
```bash
export AWS_ACCESS_KEY_ID=your-key
export AWS_SECRET_ACCESS_KEY=your-secret
export AWS_REGION=us-east-1
```

2. Install dependencies:
```bash
go mod download
```

3. Run the server:
```bash
go run cmd/server/main.go
```

4. Open http://localhost:8080 in your browser

## Docker Build

```bash
docker build -t claude-web-go .
docker run -p 8080:8080 \
  -e AWS_ACCESS_KEY_ID=$AWS_ACCESS_KEY_ID \
  -e AWS_SECRET_ACCESS_KEY=$AWS_SECRET_ACCESS_KEY \
  -e AWS_REGION=$AWS_REGION \
  claude-web-go
```

## Kubernetes Deployment

1. Create IAM role for EKS pod identity:
```bash
aws iam create-policy --policy-name claude-web-bedrock-policy --policy-document file://k8s/iam-policy.json
```

2. Associate the IAM role with the service account in your EKS cluster

3. Update the deployment.yaml with your account ID and role ARN

4. Deploy to Kubernetes:
```bash
kubectl apply -f k8s/deployment.yaml
```

## Configuration

- Context window size: Configurable in the UI (default: 20 messages)
- Session timeout: 30 minutes for file storage
- Max history: 200 messages stored in localStorage

## Architecture

- Backend: Go with Gorilla Mux
- Frontend: Vanilla JavaScript with localStorage
- File Management: Temporary file storage with automatic cleanup
- Authentication: AWS Bedrock via environment variables